# =============================================================================
# Simulation Configuration for Retail Discount DGPs
# =============================================================================

random_seed: 42

# Hierarchical structure
structure:
  K: 10           
  J_per_K: 10     
  I_per_J: 20     
  T: 10     

treatment:
  levels: [0.0, 0.1, 0.2, 0.3]
  
  propensity:
    features: ['price_baseline', 'inventory_level', 'seasonality']
    
    # Coefficients for multinomial logistic model
    # Format: [intercept, β_price, β_inventory, β_seasonality]
    coefficients:
      d0_1: [0.0, 0.01, -0.15, -0.1]
      d0_2: [0.0, 0.02, -0.25, -0.2]
      d0_3: [0.0, 0.03, -0.35, -0.3] 

covariates:
  continuous:
    price_baseline:
      distribution: "uniform"
      params: {min: 20, max: 100}
      varies_by: "item"
    
    seasonality:
      distribution: "deterministic"
      formula: "sin(2*pi*t/52) + cos(2*pi*t/52)"
      varies_by: "time"
    
    trend:
      distribution: "deterministic"
      formula: "t / T"
      varies_by: "time"
    
    store_size:
      distribution: "uniform"
      params: {min: 0.5, max: 2.0}
      varies_by: "unit"
    
    regional_demand:
      distribution: "uniform"
      params: {min: 0.7, max: 1.3}
      varies_by: "group"
    
    inventory_level:
      distribution: "beta"
      params: {a: 2, b: 2}
      varies_by: "observation"
  
  categorical:
    category:
      levels: 5
      varies_by: "item"
    
    brand:
      levels: 5
      varies_by: "item"
    
    material:
      levels: 3
      varies_by: "item"
    
    fit_type:
      levels: 2
      varies_by: "item"

# Interference structure (Stochastic Block Model settings)
interference_structure:
  generation_method: "stochastic_block_model"
  
  params:
    # Probabilities for edges (substitution links)
    p_intra_cluster: 0.6    # High probability of substitution within a super-category
    p_inter_cluster: 0.05   # Low probability of leakage between super-categories
    
    # Structural constraints
    min_super_categories: 5
    force_symmetry: true     # If A substitutes B, B must substitute A

# =============================================================================
# DGP 1: Clean
# =============================================================================
dgp1_clean:
  name: "clean"
  
  noise:
    distribution: "normal"
    std: 0.4
  
  outcome_model:
    coefficients:
      intercept: 2.5
      
      price_baseline: 0.02
      seasonality: 0.15
      trend: 0.1
      store_size: 0.2
      regional_demand: 0.3
      inventory_level: 0.5
      
      category_2: 0.1
      category_3: 0.15
      category_4: 0.2
      category_5: -0.1
      
      brand_2: 0.05
      brand_3: 0.1
      brand_4: 0.15
      brand_5: 0.3
      
      material_2: 0.05
      material_3: 0.15
      
      fit_type_2: -0.05
      
      treatment: 1.0
      
      treatment_x_price: -0.025          
      treatment_x_brand_5: 0.8      
      treatment_x_inventory: 0.4  

# =============================================================================
# DGP 2: Sparse
# =============================================================================
dgp2_sparse:
  name: "sparse"
  
  zero_inflation:
    coefficients:
      intercept: 0.5
      inventory_level: -2.0
      price_baseline: 0.02
      treatment: -1.5
      seasonality: -0.3
  
  positive_outcome:
    noise:
      distribution: "normal"
      std: 0.4
    
    coefficients:
      intercept: 2.0
      
      price_baseline: 0.015
      store_size: 0.25
      
      category_2: 0.1
      category_3: 0.15
      category_4: 0.2
      category_5: -0.1
      
      treatment: 0.8
      
      treatment_x_price: -0.01
      treatment_x_inventory: 0.3

# =============================================================================
# DGP 3: Interference
# =============================================================================
dgp3_interference:
  name: "interference"
  
  interference:
    alpha_substitution: 0.5     
    alpha_complementarity: 0.0
    
    beta_sub_same: -0.6          
    beta_sub_other: -0.15        
    beta_sub_modulation: -0.3
  
  outcome_model:
    noise:
      distribution: "normal"
      std: 0.4
    
    coefficients:
      intercept: 2.5
      price_baseline: 0.02
      seasonality: 0.15
      trend: 0.1
      store_size: 0.2
      regional_demand: 0.3
      inventory_level: 0.5
      
      category_2: 0.1
      category_3: 0.15
      category_4: 0.2
      category_5: -0.1
      
      brand_2: 0.05
      brand_3: 0.1
      brand_4: 0.15
      brand_5: 0.3
      
      material_2: 0.05
      material_3: 0.15
      
      fit_type_2: -0.05
      
      treatment: 1.0
      treatment_x_price: -0.015
      treatment_x_brand_5: 0.3

# =============================================================================
# DGP 4: Both (Sparse + Interference)
# =============================================================================
dgp4_both:
  name: "both"
  
  interference:
    alpha_substitution: 0.5      
    alpha_complementarity: 0.0   
  
  zero_inflation:
    coefficients:
      intercept: 0.5
      inventory_level: -2.0
      price_baseline: 0.02
      treatment: -1.5
      seasonality: -0.3
      
      interference_same: 0.8
  
  positive_outcome:
    noise:
      distribution: "normal"
      std: 0.4
    
    coefficients:
      intercept: 2.0
      price_baseline: 0.015
      store_size: 0.25
      
      category_2: 0.1
      category_3: 0.15
      category_4: 0.2
      category_5: -0.1
      
      treatment: 0.8
      treatment_x_price: -0.01
      
      interference_same: -0.5
      interference_modulation: -0.25